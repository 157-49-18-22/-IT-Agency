/* Global Modal Z-Index Fix - Prevents Duplicate Screens on iPad/Tablet */

/* Ensure all modal overlays have higher z-index than sidebars */
.modal-overlay {
    z-index: 9999 !important;
    -webkit-backdrop-filter: blur(4px) !important;
    backdrop-filter: blur(4px) !important;
}

/* Ensure all modals appear above overlays */
.modal {
    z-index: 10000 !important;
    position: relative !important;
}

/* Ensure sidebars stay below modals */
.sidebar {
    z-index: 900 !important;
}

/* Ensure main content doesn't overlap */
.main-content {
    z-index: 1 !important;
}

/* iPad Pro (1024px) specific fixes */
@media (min-width: 768px) and (max-width: 1024px) {

    /* Fix app container for iPad */
    .app-container {
        display: flex !important;
        width: 100vw !important;
        height: 100vh !important;
        overflow: hidden !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
    }

    /* Sidebar proper sizing for iPad */
    .sidebar {
        width: 280px !important;
        min-width: 280px !important;
        max-width: 280px !important;
        height: 100vh !important;
        position: fixed !important;
        left: 0 !important;
        top: 0 !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        flex-shrink: 0 !important;
    }

    /* Main content proper alignment for iPad */
    .main-content {
        margin-left: 280px !important;
        width: calc(100vw - 280px) !important;
        height: 100vh !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        position: relative !important;
    }

    /* Prevent body scroll when modal is open */
    body.modal-open {
        overflow: hidden !important;
    }

    /* Fix for duplicate screens */
    .modal-overlay {
        position: fixed !important;
        inset: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        left: 0 !important;
        top: 0 !important;
    }

    /* Modal proper centering on iPad */
    .modal {
        max-width: 90% !important;
        max-height: 90vh !important;
        margin: auto !important;
    }

    /* Fix dashboard content */
    .dashboard-content,
    .team-container,
    .deliverables {
        width: 100% !important;
        max-width: 100% !important;
        padding: 20px !important;
        box-sizing: border-box !important;
    }
}

/* Standard iPad (768px) specific fixes */
@media (min-width: 641px) and (max-width: 767px) {
    .sidebar {
        width: 250px !important;
        min-width: 250px !important;
    }

    .main-content {
        margin-left: 250px !important;
        width: calc(100vw - 250px) !important;
    }

    .modal-overlay {
        padding: 15px !important;
    }

    .modal {
        max-width: 600px !important;
    }
}

/* Mobile fixes */
@media (max-width: 640px) {
    .modal-overlay {
        padding: 10px !important;
    }

    .modal {
        max-width: 100% !important;
        max-height: 95vh !important;
    }

    /* Hide sidebar on mobile, show hamburger menu */
    .sidebar {
        transform: translateX(-100%) !important;
        transition: transform 0.3s ease !important;
    }

    .sidebar.active {
        transform: translateX(0) !important;
    }

    .main-content {
        margin-left: 0 !important;
        width: 100vw !important;
    }
}

/* Landscape iPad fixes */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
    .sidebar {
        width: 260px !important;
    }

    .main-content {
        margin-left: 260px !important;
        width: calc(100vw - 260px) !important;
    }
}

/* Portrait iPad fixes */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
    .sidebar {
        width: 280px !important;
    }

    .main-content {
        margin-left: 280px !important;
        width: calc(100vw - 280px) !important;
    }

    /* Adjust grid layouts for portrait */
    .team-grid,
    .grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)) !important;
    }
}